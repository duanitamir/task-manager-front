(this["webpackJsonptask-maganer-front"]=this["webpackJsonptask-maganer-front"]||[]).push([[0],{134:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a(0),c=a.n(o),r=a(23),s=a.n(r),l=c.a.createContext(),i=a(7),u=a(42),m=a.n(u),d=a(17),h=function(e){var t=e.isAuthenticated,a=e.component,n=Object(d.a)(e,["isAuthenticated","component"]);return c.a.createElement(i.b,Object.assign({},n,{component:function(e){return t?c.a.createElement(i.a,{to:"/dashboard"}):c.a.createElement(a,e)}}))},p=a(15),E=function(e){var t=e.image,a=e.text;return c.a.createElement("div",{className:"panel__item"},c.a.createElement("div",{className:"panel-container"},c.a.createElement("img",{className:"panel__img",src:t,alt:"Panel icon img"})),c.a.createElement("div",{className:"panel-container"},c.a.createElement("div",{className:"panel__text"},a)))},f=function(){var e=Object(o.useContext)(l).userDispatch;return c.a.createElement("div",null,c.a.createElement("div",{className:"header"},c.a.createElement("button",{className:"header__button--logout button",onClick:function(){e({type:"LOGOUT"}),T.push("/")}},"Logout"),c.a.createElement("div",{className:"header__container"},c.a.createElement("h1",null," ",c.a.createElement(p.a,{className:"header__title",to:"/dashboard"}," Task Manager App")),c.a.createElement("div",{className:"header__subtitle"}," Manage your daily tasks in a click")),c.a.createElement("button",{onClick:function(){document.getElementsByClassName("footer")[0].scrollIntoView({behavior:"smooth"})},className:"button__new-task"},"Create a new Task")),c.a.createElement("div",{className:"panel"},[{image:"/images/icons/cloud.svg",text:"Use cloud base database to store your tasks and ideas"},{image:"/images/icons/pencil.svg",text:"Easily add, mark as done and remove tasks and idea from the board"},{image:"/images/icons/team.svg",text:"Work with a team and share your ideas on the task board"}].map((function(e){return c.a.createElement(E,{key:e.text,image:e.image,text:e.text})}))))},g=c.a.createContext(),b=function(){var e=Object(o.useContext)(l).user,t=Object(o.useContext)(g).tasksDispatch,a=Object(o.useState)(0),r=Object(n.a)(a,2),s=r[0],i=r[1],u=Object(o.useState)(""),m=Object(n.a)(u,2),d=m[0],h=m[1],p=Object(o.useState)(""),E=Object(n.a)(p,2),f=E[0],b=E[1];return c.a.createElement("div",null,c.a.createElement("div",{className:"form__title"},"Add a new Task"),""!==d&&c.a.createElement("div",{className:"form__error"},d),c.a.createElement("form",{onSubmit:function(a){a.preventDefault(),f.length>5?(t({type:"ADD_TASK",task:f,token:e.token}),h(""),b("")):h("Unable to add the task. Task must have at lease 5 characters"),i(s+1)}},c.a.createElement("input",{className:"form__input--add_task form__input ",value:f,onChange:function(e){return b(e.target.value)},type:"text"}),c.a.createElement("br",null),c.a.createElement("button",{className:"button"},"Add Task")))},k=function(){return c.a.createElement("div",{className:"footer"},c.a.createElement(b,null))},v=function(e){e.isAuthenticated;var t=e.component,a=Object(d.a)(e,["isAuthenticated","component"]);return c.a.createElement("div",null,c.a.createElement(f,null),c.a.createElement(t,a),c.a.createElement(k,null))},_=function(){return c.a.createElement("div",{className:"loader"},c.a.createElement("img",{className:"loader__image",src:"/images/loader.gif",alt:"Loading gif"}))},N=a(41),O=a.n(N),S=function(e){var t=e.completed,a=e.description,r=e._id,s=e.completeTask,l=e.createdAt,i=e.removeTask,u=Object(o.useState)(t),m=Object(n.a)(u,2),d=m[0],h=m[1];return c.a.createElement("div",{className:t?"task-completed task-container":"task-container"},c.a.createElement("div",{className:"task-container__title"},c.a.createElement("span",{className:"task-container__createdAt"},O()(l).format("MMM Do YY")),!t&&c.a.createElement("span",{className:"task-container__remove-task"},c.a.createElement("button",{className:"x-button ",onClick:function(){i(r)}},c.a.createElement("img",{className:"id-img",src:"/images/rmv_icon.svg",alt:"Remove task icon"})))),c.a.createElement("div",{className:"task-container__description"},a),t?c.a.createElement("div",{className:" button-container--completed button-container"},c.a.createElement("button",{className:"button",onClick:function(){h(!d),s(r,t)}},"Do Again"),c.a.createElement("button",{className:"button",onClick:function(){i(r)}},"Remove Task")):c.a.createElement("div",{className:"button-container"},c.a.createElement("button",{className:"button",onClick:function(){h(!d),s(r,t)}}," Done ")))},j=function(e){var t=Object(o.useContext)(l).user,a=Object(o.useContext)(g).tasks,r=Object(o.useContext)(g).tasksDispatch,s=Object(o.useState)(0),i=Object(n.a)(s,2),u=i[0],m=i[1],d=function(e,a,n){r({type:"COMPLETE_TASK",completed:a,id:e,token:t.token}),m(u+1)},h=function(e){var n=a.filter((function(t){return t._id!==e}));r({type:"REMOVE_TASK",token:t.token,id:e,tasks:n})};return c.a.createElement("div",{className:" task-list content-container"},a.length>0?a.map((function(e){return c.a.createElement(S,Object.assign({key:e.id},e,{completeTask:d,removeTask:h}))})):c.a.createElement("div",{className:"empty-task-list"}," Add new tasks down "))},y=function(){var e=Object(o.useContext)(l).user,t=Object(o.useState)(!1),a=Object(n.a)(t,2),r=a[0],s=a[1],i=Object(o.useContext)(g).tasksDispatch,u=e.user;return Object(o.useEffect)((function(){fetch("https://task-manager-duani.herokuapp.com/tasks",{method:"GET",headers:{"cache-control":"no-cache",Authorization:"Bearer ".concat(e.token)}}).then((function(e){return e})).then((function(e){return e.json()})).then((function(e){return i({type:"SET_TASKS",tasks:e}),!0})).then((function(){s(!0)})).catch((function(e){console.log(e)}))}),[u]),c.a.createElement("div",null,r?c.a.createElement(j,null):c.a.createElement(_,null))},T=m()(),A=function(){var e=Object(o.useContext)(l).user;return c.a.createElement(i.c,{history:T},c.a.createElement(i.d,null,c.a.createElement(h,{path:"/",isAuthenticated:!!e.token,component:I,exact:!0}),c.a.createElement(h,{path:"/register",isAuthenticated:!!e.token,component:I,exact:!0}),c.a.createElement(v,{path:"/dashboard",isAuthenticated:!!e.token,component:y})))},C=function(e){var t=e.handleLogin,a=e.setError,n=e.setEmail,o=e.setPass,r=e.setLocation,s=e.error;e.pass;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:t},c.a.createElement("div",{className:"login-form__container"},c.a.createElement("label",null,"EMAIL"),c.a.createElement("input",{className:"form__input--login",type:"text",onChange:function(e){n(e.target.value)}}),c.a.createElement("label",null,"PASSWORD"),c.a.createElement("input",{className:"form__input--login",type:"password",onChange:function(e){o(e.target.value)}}),s&&c.a.createElement("div",{className:"form__error--login"}," ",s)),c.a.createElement("div",{className:"button-container__login"},c.a.createElement("button",{className:"button"},"LOGIN")),c.a.createElement("div",{className:"form__change"},c.a.createElement("button",{className:"button--link",onClick:function(){r("register"),a(!1)}},"REGISTER"))))},x=function(e){var t=e.setEmail,a=e.setPass,n=e.setName,o=e.setAge,r=e.handleRegister,s=e.setError,l=e.setLocation,i=e.error;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:r},c.a.createElement("div",{className:"register-form__container"},c.a.createElement("label",null,"NAME"),c.a.createElement("input",{className:"form__input--login",type:"text",onChange:function(e){n(e.target.value)}}),c.a.createElement("label",null,"EMAIL"),c.a.createElement("input",{className:"form__input--login",type:"text",onChange:function(e){t(e.target.value)}}),c.a.createElement("label",null,"PASSWORD"),c.a.createElement("input",{className:"form__input--login",type:"password",onChange:function(e){a(e.target.value)}}),c.a.createElement("label",null,"AGE"),c.a.createElement("input",{className:"form__input--login",type:"text",onChange:function(e){o(e.target.value)}}),i&&c.a.createElement("div",{className:"form__error--login"}," ",i)),c.a.createElement("div",{className:"button-container__login"},c.a.createElement("button",{className:"button"},"REGISTER")),c.a.createElement("div",{className:"form__change"},"Already registered? ",c.a.createElement("button",{className:"button--link ",onClick:function(){l("login"),s(!1)}},"LOGIN"))))},w=a(60),I=function(e){var t=Object(o.useState)(""),a=Object(n.a)(t,2),r=a[0],s=a[1],i=Object(o.useState)(""),u=Object(n.a)(i,2),m=u[0],d=u[1],h=Object(o.useState)(0),p=Object(n.a)(h,2),E=p[0],f=p[1],g=Object(o.useState)(""),b=Object(n.a)(g,2),k=b[0],v=b[1],_=Object(o.useState)("login"),N=Object(n.a)(_,2),O=N[0],S=N[1],j=Object(o.useState)(!1),y=Object(n.a)(j,2),A=y[0],I=y[1],P=Object(o.useContext)(l).userDispatch;return c.a.createElement("div",{className:"box_layout"},"login"===O?c.a.createElement("div",{className:"box"},c.a.createElement("div",{className:"box-title"},"LOGIN"),c.a.createElement("div",{className:"box-form"},c.a.createElement(C,{handleLogin:function(e){(e.preventDefault(),""!==r&&w.isEmail(r))?(I(!1),fetch("https://task-manager-duani.herokuapp.com/users/login",{method:"POST",headers:{"cache-control":"no-cache","Content-Type":"application/json"},body:JSON.stringify({email:r,password:m})}).then((function(e){return console.log(e),e.json()})).then((function(e){return console.log(e),P({type:"LOGIN",user:e.user,token:e.token}),I(!1),{user:e.user,token:e.token}})).catch((function(e){I("Email or password are not correct")})).then((function(e){if(e.token)return T.push("/dashboard"),!0})).catch((function(e){console.log(e)}))):I("Non valid email provided, please try again")},email:r,pass:m,setEmail:s,setError:I,setPass:d,error:A,setLocation:S}))):c.a.createElement("div",{className:"box--register box"},c.a.createElement("div",{className:"box-title"}," REGISTER"),c.a.createElement("div",{className:"box-form"},c.a.createElement(x,{email:r,setError:I,pass:m,setEmail:s,setPass:d,name:k,setName:v,age:E,setAge:f,setLocation:S,error:A,handleRegister:function(e){e.preventDefault(),""!==r&&w.isEmail(r)?m.length<7?I("Password must have at least 7 letters"):""===k?I("Unvalid name"):m.toLowerCase().includes("password")?I('Password can not contain the word "password"'):E<0?I("Age must be positive number "):(I(!1),fetch("https://task-manager-duani.herokuapp.com/users",{method:"POST",headers:{"cache-control":"no-cache","Content-Type":"application/json"},body:JSON.stringify({name:k,age:E,email:r,password:m})}).then((function(e){return e})).then((function(e){fetch("https://task-manager-duani.herokuapp.com/users/login",{method:"POST",headers:{"cache-control":"no-cache","Content-Type":"application/json"},body:JSON.stringify({email:r,password:m})}).then((function(e){return e.json()})).then((function(e){return P({type:"LOGIN",user:e.user,token:e.token}),{user:e.user,token:e.token}})).catch((function(e){I("There is already user with this email address")})).then((function(e){if(e.token)return I("false"),T.push("/dashboard"),!0})).catch((function(e){console.log(e)}))})).catch((function(e){return e}))):I("Non valid email provided, please try again")}}))))},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var a=JSON.stringify(t.user);return localStorage.setItem("user",a),localStorage.setItem("token",t.token),{user:t.user,token:t.token};case"SET_USER":var n=JSON.parse(localStorage.getItem("user")),o=localStorage.getItem("token");return{user:n,token:o};case"LOGOUT":return localStorage.removeItem("user"),localStorage.removeItem("token"),{};case"REGISTER":fetch("https://task-manager-duani.herokuapp.com/users",{method:"POST",headers:{"Postman-Token":"1ac860e2-7214-468c-821f-b9c3c8bd10ec","cache-control":"no-cache","Content-Type":"application/json"},body:JSON.stringify({name:t.name,age:t.age,email:t.email,password:t.password})}).then((function(e){console.log(e)})).catch((function(e){return console.log(e),e}));break;default:return e}},L=a(45),D=a(44),R=a(43),G=[],M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TASK":var a=!1,n=fetch("https://task-manager-duani.herokuapp.com/tasks",{method:"POST",headers:{"cache-control":"no-cache",Authorization:"Bearer ".concat(t.token),"Postman-Token":"5813d003-9a93-4d8f-9fdc-cf6adbbb5d2f","Content-Type":"application/json"},body:JSON.stringify({description:t.task}),json:!0}).then((function(e){return e.json()})).then((function(e){return console.log(e),e})).catch((function(e){a=!0})),o={completed:!1,description:t.task,_id:Object(R.a)()};return n.then((function(e){o._id=e._id})),a?"Not able to set task":[].concat(Object(D.a)(e),[o]);case"REMOVE_TASK":return fetch("https://task-manager-duani.herokuapp.com/tasks/".concat(t.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t.token),"Postman-Token":"dad7fd97-7fa6-44f0-91f3-44222de56e4f","cache-control":"no-cache"}}).catch((function(e){return e})),t.tasks;case"COMPLETE_TASK":return fetch("https://task-manager-duani.herokuapp.com/tasks/".concat(t.id),{method:"PATCH",headers:{"Postman-Token":"20d45446-b56a-492c-b53e-420a79caac41",Authorization:"Bearer ".concat(t.token),"cache-control":"no-cache","Content-Type":"application/json"},body:JSON.stringify({completed:!t.completed}),json:!0}).catch((function(e){return e})),e.map((function(e){return e._id===t.id?Object(L.a)({},e,{completed:!t.completed}):e}));case"SET_TASKS":return t.tasks;default:return e}},J=(a(134),localStorage.getItem("token")),K=function(){J||(J=!0,s.a.render(c.a.createElement(B,null),document.getElementById("app")),T.push("/dashboard"))},B=function(){var e=Object(o.useReducer)(P,{}),t=Object(n.a)(e,2),a=t[0],r=t[1],s=Object(o.useReducer)(M,[]),i=Object(n.a)(s,2),u=i[0],m=i[1];return Object(o.useEffect)((function(){null!==JSON.parse(localStorage.getItem("user"))&&(r({type:"SET_USER"}),K())}),[]),Object(o.useEffect)((function(){void 0!==a.token&&K()}),[a]),c.a.createElement(l.Provider,{value:{user:a,userDispatch:r}},c.a.createElement(g.Provider,{value:{tasks:u,tasksDispatch:m}},J?c.a.createElement(A,null):c.a.createElement(I,null)))};s.a.render(c.a.createElement(B,null),document.getElementById("app"))},46:function(e,t,a){e.exports=a(135)}},[[46,1,2]]]);
//# sourceMappingURL=main.c4141e40.chunk.js.map